# Block Production on Solar

In this article, we'll be discussing **block production** and how it works in Solar. Being a delegated proof-of-stake (DPoS) blockchain, the process on Solar is slightly different from other consensus models used by Bitcoin (proof-of-work) and Ethereum (proof-of-stake).

## Solar is DPoS
In delegated proof-of-stake networks such as Solar there are a set number of nodes (known as block producers, block producers or validators) that are allowed to produce a block new blocks. In Solar, there are 53 active block producers. Block producers have to gain votes from other network participants, who pledge their account balance as votes, and once they have a total amount of votes that put them into the top 53, they will be able to produce blocks and earn rewards. The account balance of participants who vote for a active block producer remain unlocked and therefore it is possible to immediately spend funds held in an address. The amount of votes per address varies across different DPoS networks, but the principle is the same: one coin means one vote power. Generally, block producers will write a proposal on how they will participate in the Solar community and contribute to the Solar ecosystem - in return, they will share a portion of the block rewards with their voters.

## Rounds, ranks and block production order
Once block producers receive enough votes to enter the top 53 block producers, they will start actively producing blocks. In proof-of-work networks such as Bitcoin, the probability of mining a block increase as you have a higher hashrate (better/more mining equipment), and in proof-of-stake the probabilities of earning a staking reward increase as you have more coins. For Solar, this is not the case; each block producer has an equal chance to produce blocks, as long as they are in the top 53. This is because, whilst entering the top 53 requires a block producer to have a high voteweight, block production occurs in rounds of 53 blocks.

### Rounds and block producer ranks?
Every set of 53 blocks, starting with genesis block (blockheight 1) is known as a **round** of blocks. Round 1 contains blocks 1-53, round 2 contains blocks 54-106, round 3 contains blocks 107-159, et cetera. At the start of each round (before block 54, before block 107, ..) the total voteweight of each block producer is assessed and the block producers in **rank** 1 - 53 are noted. These 53 block producers will be able to produce a block in the respective round. If a block producer loses votes during the round, and drops out of the top 53, they will still be able to produce blocks during that round since ranks are not updated during each rounds, but only at the start of a new round.

### Rounds and block production order?
Each round, after the block producers ranked 1 - 53 are noted, a random order of those 53 block producers is created. This random order is known as the **block production order**. This random block production order is recalculated for each round, so generally rounds following after eachother will have a different block production order - even if the block producers in the top 53 have not changed.

## A round of block producing
After the top 53 block producers has been noted and a random block production order of all 53 block producers has been calculated, block producers are given the chance to produce blocks in the respective round. On Solar, there are 8 second blocktimes and these 8 seconds are also knows as a **block production slot** for the block producer. Of these 8 seconds, every block producer has six seconds to produce a block, as the last two seconds are reserved for broadcasting the produced block and allowing it to propagate through the network. Assuming all block producers produce a block in time, that is in the first six seconds of their slot, a round will take 8 * 53 = 424 seconds (roughly 7 minutes) to complete before moving on to a new round.

### What if a block producer fails to produce a block?
As mentioned in the paragraph above, each block producer has a slot of 8 seconds in which they are allowed to produce a block (6 seconds to produce a block and 2 seconds to propagate it through the network). But sometimes, a block producer may not be able to produce a block within these 8 seconds. Their server might be inaccessible or offline, it may suffer from timedrift (where the server clock is too far off the actual time) or a block producer may have setup a server with hardware specifications that are sub-par.

When a block producer fails to produce a block in their slot, no block is created and their block production slot is forfeited. The block producers next in line in the block production order will continue the round and attempt to produce blocks as if nothing happened. However, after each block producer has had an attempt at block production, there are now only 52 blocks in the round. As a round **must** consist of 53 blocks, an additional slot is added to the round. The block producer that was first in the random block production order, will be awared this additional slot and they are allowed to produce a second block in the round.

If multiple block producers fail to produce a block, or if the block producer assigned to this additional slot fails to produce a block as well, additional slots will be added to the round until 53 blocks have been produced. Each additional slot will go to the next block producer in the block production order (additional slot for first failed block production attempt to first block producer in random block production order, additional slot for second failed block production attempt to the second block producer in random block production order, and so on). This means that when block producers fail to produce a block, they are essentially delaying transaction confirmation times on the network. Therefore it is important to verify that the block producer you vote for does not fail to produce any blocks.

## Summary

Blocks are produced in rounds of 53 blocks. At the start of each round, the top 53 block producers (ranked 1 - 53) are taken and a random block production order is calculated. Each block producer is awarded an 8 second slot to produce a block, of which the last 2 seconds are reserved for propagating the produced block through the network. If a block producer fails to produce a block, he forfeits his slot and an additional slot is assigned to the first block producer in the random block production order of that round (and if multiple blocks are failed, the next slot goes to the second block producer in block production order, then the third block producer and so forth). Voters should hold block producers accountable for their block production, as failed block production attempts harm transaction confirmations on the network.

---

If you found this article helpful, check out [my other articles](https://github.com/Bx64/Awesome-Solar/blob/main/awesome-blog/README.md) and please consider voting for block producer **[bfx](https://delegates.solar.org/delegates/bfx)**.